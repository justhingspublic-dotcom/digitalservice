# 商業服務業數位應用資料庫系統 - PRD

**Product Requirement Document**  
**版本**：v2.0  
**最後更新**：2025-10-16

---

## 📋 基本資訊

| 項目 | 內容 |
|------|------|
| **專案名稱** | 商業服務業數位應用資料庫系統 |
| **範圍** | 前台 5 頁 + 後台 6 頁 |
| **開發週期** | 4 週（已完成） |
| **風格** | 簡潔專業、政府正式感 |
| **UI 框架** | Bootstrap 5.3.0 |
| **目標用戶** | 中小企業 + 輔導顧問 |

---

## 🎯 專案目標

1. 協助中小企業評估數位轉型現況與需求
2. 提供輔導顧問管理企業資料與輔導紀錄的平台
3. 整合問卷資料庫，支援批次匯入與動態查詢
4. 提供視覺化統計與報表匯出功能

---

## 🎨 設計規範

### 色彩系統
```
主色 #1890FF    | 藍色，用於主要按鈕、連結
成功 #52C41A    | 綠色，用於成功提示、完成狀態
警告 #ff9800    | 橘色，用於警告提示
錯誤 #FF4D4F    | 紅色，用於錯誤提示、危險操作
資訊 #2196F3    | 淺藍，用於資訊提示

文字 #262626    | 主要文字顏色
灰字 #8C8C8C    | 次要文字、提示文字
背景 #F0F2F5    | 頁面背景灰
邊框 #e0e0e0    | 卡片與表格邊框
```

### 字體與間距
| 項目 | 規格 |
|------|------|
| **標題** | 20-24px，粗體（font-weight: 600） |
| **內文** | 14px，正常（font-weight: 400） |
| **說明** | 12px，正常 |
| **行高** | 1.5（內文）/ 1.2（標題） |
| **間距** | 4px / 8px / 16px / 24px / 32px |
| **圓角** | 8px（卡片、按鈕、輸入框） |

---

## 📱 頁面清單

### 前台（5 頁）✅

| 頁面 | 檔案 | 內容 | 狀態 |
|------|------|------|------|
| **P01** | p01-welcome.html | LOGO + 系統說明 + 隱私聲明 checkbox + 開始按鈕 | ✅ |
| **P02** | p02-basic-info.html | 企業基本資料表單（15 欄位） | ✅ |
| **P03** | p03-digital-status.html | 3 面向（行銷/營運/顧客）+ 優先度題 | ✅ |
| **P04** | p04-transformation.html | 困難點 + 資源需求 + 開放建議 | ✅ |
| **P05** | p05-complete.html | 綠色勾選 + 感謝文字 + 問卷編號 | ✅ |

**前台進度條設計**：
```
●━━━○━━━○━━━○
基本  現況  經驗  完成
```

---

### 後台（6 頁）✅

| 頁面 | 檔案 | 內容 | 狀態 |
|------|------|------|------|
| **A01** | a01-login.html | 帳密登入卡片（400px 寬） | ✅ |
| **A02** | a02-companies.html | 公司列表 + 搜尋篩選 + 匯出 | ✅ |
| **A03** | a03-company-detail.html | 公司詳情 + 問卷管理 + 輔導紀錄 | ✅ |
| **A04** | a04-dashboard.html | 數據卡片 + 統計圖表（Chart.js） | ✅ |
| **A05** | a05-guidance-records.html | 全局輔導紀錄查詢 + 篩選 | ✅ |
| **A07** | a07-users.html | 使用者管理（CRUD） | ✅ |

---

## 🎯 關鍵功能設計

### 前台

#### 1. 進度條
```
P01 → P02 → P03 → P04 → P05
歡迎   基本   現況   經驗   完成
```

#### 2. 表單元件
- **輸入框**：高度 40px，必填欄位標示 `*`
- **優先度輸入**：寬度 48px，限制輸入 1-5 或 1-3
- **產業別選擇**：選擇後可能顯示子題
- **底部按鈕**：`[← 上一步]` `[下一步 →]`

#### 3. 驗證規則
- 必填欄位不可為空
- Email 格式驗證
- 統一編號長度驗證（8碼）
- 優先度數字範圍驗證

---

### 後台

#### 1. 佈局結構
```
┌─────────────────────────────────────┐
│  頂部導航列 (64px)                   │
├──────┬──────────────────────────────┤
│      │                              │
│ 側邊 │                              │
│ 選單 │      主內容區                │
│(200) │                              │
│      │                              │
└──────┴──────────────────────────────┘
```

#### 2. 表格設計
- **行高**：56px
- **樣式**：斑馬條紋（奇偶行不同背景）
- **Hover**：淺藍背景 (#f5f5f5)
- **欄位**：
  - 企業名稱 / 統一編號 / 縣市 / 產業 / 加入時間 / 操作
  - 可排序、可篩選

#### 3. 問卷管理模組（A03）

##### 新增問卷（Item 6）✅
- Modal 彈窗表單
- 欄位：問卷名稱、描述、負責人
- 驗證：必填欄位檢查

##### Excel 匯入（Items 7-9）✅
- 支援 .xlsx/.xls 格式
- 自動辨識標題列為欄位定義
- 重新匯入時覆蓋舊資料
- 顯示匯入進度與結果

##### 匯入紀錄管理（Item 10）✅
- 記錄每次匯入的詳細資訊
  - 檔案名稱
  - 上傳者
  - 上傳時間
  - 紀錄數量
  - 欄位數量
- 折疊式 UI，節省空間
- 可刪除歷史紀錄

##### 動態欄位查詢（Item 11）✅
- **欄位選擇器**
  - 核取方塊列表
  - 勾選要顯示的欄位
  - 預設全選
  
- **篩選條件**
  - Accordion 展開式設計
  - 每個欄位獨立展開
  - 搜尋框 + 核取方塊列表
  - 顯示每個選項的資料筆數
  
- **邏輯規則**
  - 同欄位內：OR（聯集）
  - 不同欄位間：AND（交集）

##### 匯出功能（Item 12）✅
- 格式：Excel（.xlsx）、CSV（.csv）
- 匯出範圍：當前篩選結果
- 包含選擇的可見欄位
- 檔名：`公司名稱_問卷名稱_日期.xlsx`

#### 4. 輔導紀錄模組（A03 + A05）

##### 輔導紀錄 CRUD（Item 13）✅
- **新增紀錄**
  - 日期、類型、階段、顧問
  - 主題、內容、建議
  
- **編輯與刪除**
  - 點擊編輯按鈕進入編輯模式
  - 刪除前二次確認

- **查看詳情**
  - 完整資訊展示
  - 附件管理區域

##### 附件上傳（Item 14）✅
- **上傳功能**
  - 支援多檔案同時上傳
  - 無檔案大小限制（localStorage 受限）
  - Base64 編碼儲存
  
- **附件分類**
  - 📄 報告文件：PDF、Excel、Word、PPT、CSV
  - 📷 現場照片：JPG、PNG、GIF、WEBP
  - 📎 其他檔案：其餘檔案類型
  
- **附件管理**
  - 圖片預覽（Modal 放大）
  - 檔案下載
  - 刪除功能
  - 檔案類型圖標辨識

- **UI 設計**
  - Accordion 折疊式顯示
  - 每個類別可獨立展開
  - 顯示檔案數量與大小

##### 輔導階段追蹤（Item 15）✅
- **三階段管理**
  - 🔵 初訪（藍色 badge）
  - 🟡 中期（黃色 badge）
  - 🟢 結案（綠色 badge）
  
- **階段更新**
  - 編輯紀錄時可更新階段
  - 階段統計顯示於列表

##### 篩選查詢功能（Item 16）✅
- **全局輔導紀錄頁（A05）**
  
- **篩選條件**
  - 🔍 關鍵字搜尋（9 個欄位）
    - 公司名稱、縣市、產業別
    - 輔導類型、階段、顧問
    - 主題、內容、建議
  - 👤 輔導顧問下拉選單
  - 📅 日期區間（開始日期 - 結束日期）
  - 📋 輔導類型下拉選單
  - 📊 輔導階段下拉選單
  
- **搜尋結果**
  - 跨公司顯示
  - 顯示公司資訊 + 輔導紀錄
  - 按日期排序（最新在前）
  - 顯示總筆數

##### 報表匯出功能（Item 17）✅
- **匯出位置**
  - 單一公司（A03）：該公司所有輔導紀錄
  - 全局查詢（A05）：篩選後的輔導紀錄
  
- **匯出格式**
  - ✅ Excel（.xlsx）- 使用 XLSX.js
  - ✅ CSV（.csv）- 含 BOM 支援中文
  - ⏳ PDF（.pdf）- 按鈕已預留，待範本提供
  
- **匯出欄位**（單一公司）
  - #、輔導日期、類型、階段、顧問
  - 主題、內容、建議、附件數量
  
- **匯出欄位**（全局）
  - #、公司名稱、縣市、產業別
  - 輔導日期、類型、階段、顧問
  - 主題、內容、建議、附件數量

#### 5. 儀表板（A04）✅
- **統計卡片**
  - 總公司數
  - 本週新增
  - 本月新增
  - 活躍公司數
  
- **視覺化圖表**（Chart.js）
  - 📊 圓餅圖：產業別分布
  - 📈 橫條圖：年度趨勢分析
  
- **統計表格**
  - 縣市分布統計
  - 產業別分布統計
  - 企業規模統計
  - 數位化階段分布

---

## 🔧 元件規範

### 按鈕
| 類型 | 樣式 | 尺寸 | 用途 |
|------|------|------|------|
| **主按鈕** | 藍底白字 | 40px 高 | 主要操作（提交、儲存） |
| **次按鈕** | 白底藍框 | 40px 高 | 次要操作（取消、返回） |
| **危險按鈕** | 紅底白字 | 40px 高 | 危險操作（刪除） |
| **成功按鈕** | 綠底白字 | 40px 高 | 成功操作（匯出） |

### 訊息提示
| 類型 | 樣式 | 圖標 | 顯示時間 |
|------|------|------|---------|
| **成功** | 綠底白字 | ✓ | 3 秒 |
| **錯誤** | 紅底白字 | ✗ | 5 秒 |
| **警告** | 橘底白字 | ⚠ | 4 秒 |
| **資訊** | 藍底白字 | ℹ | 3 秒 |

### Modal 彈窗
- **寬度**：400px（小）/ 600px（中）/ 800px（大）
- **背景遮罩**：半透明黑色（rgba(0,0,0,0.5)）
- **標題列**：含關閉按鈕
- **按鈕區**：右對齊，主按鈕在右

### 表單
- **標籤**：12px，灰色，位於輸入框上方
- **輸入框**：高度 40px，圓角 8px
- **必填標示**：紅色 `*`
- **錯誤訊息**：紅色文字，顯示於輸入框下方
- **說明文字**：灰色，12px

---

## 📦 技術規格

### 前端技術棧
| 技術 | 版本 | CDN |
|------|------|-----|
| Bootstrap | 5.3.0 | cdn.jsdelivr.net |
| Chart.js | 4.4.0 | cdn.jsdelivr.net |
| XLSX.js | 0.18.5 | cdn.jsdelivr.net |
| Material Icons | Latest | fonts.googleapis.com |

### 瀏覽器支援
- Chrome 90+
- Firefox 88+
- Safari 14+
- Edge 90+
- **不支援** IE

### 資料儲存
- **當前方案**：localStorage（5-10MB 限制）
- **未來規劃**：後端 API + MySQL/PostgreSQL

---

## ✅ 驗收標準

### 功能性需求
- [x] 前台 5 頁問卷流程完整
- [x] 後台 6 頁管理功能完整
- [x] 問卷管理模組（Items 6-12）全數完成
- [x] 輔導紀錄模組（Items 13-17）全數完成
- [x] 資料持久化（localStorage）
- [x] 匯入匯出功能正常

### 使用者體驗
- [x] 必填標 `*`，錯誤訊息友善
- [x] 色彩對比符合 WCAG AA
- [x] 文字大小 ≥ 14px
- [x] 按鈕 hover/active 狀態明確
- [x] 點擊區域 ≥ 44px
- [x] 樣式統一（按鈕、卡片、表單）

### 效能要求
- [x] 頁面載入時間 < 2 秒
- [x] 互動響應時間 < 100ms
- [x] 大量資料（1000 筆）仍可順暢操作

---

## 🚀 未來擴展

### Phase 2（短期）
- [ ] PDF 匯出功能實作
- [ ] 響應式設計（平板、手機）
- [ ] 批次匯入企業資料
- [ ] 進階統計報表

### Phase 3（中期）
- [ ] 後端 API 開發
- [ ] 資料庫整合
- [ ] 使用者權限細分
- [ ] Email 通知功能
- [ ] 系統日誌記錄

### Phase 4（長期）
- [ ] AI 輔助分析
- [ ] 企業數位成熟度評分
- [ ] 知識庫與案例分享
- [ ] 行動裝置 App

---

## 📅 開發時程

| 週次 | 任務 | 狀態 |
|------|------|------|
| **W1** | 前台 5 頁 + 元件庫 | ✅ 已完成 |
| **W2** | 後台基礎功能（登入、列表、儀表板） | ✅ 已完成 |
| **W3** | 問卷管理模組（Items 6-12） | ✅ 已完成 |
| **W4** | 輔導紀錄模組（Items 13-17） | ✅ 已完成 |

---

## 💡 核心設計原則

1. **用 Bootstrap 5**  
   省去 90% 時間，專注業務邏輯

2. **桌面優先**  
   MVP 只做 ≥1200px，未來再擴展

3. **清楚引導**  
   進度條、必填標示、友善錯誤訊息

4. **Modal 優先**  
   複雜表單使用彈窗，避免頁面跳轉

5. **即時回饋**  
   操作後立即顯示結果，減少等待感

6. **資料完整性**  
   匯入、編輯、刪除都有二次確認

---

## 📞 聯絡資訊

**專案負責人**：經濟部中小企業處  
**開發團隊**：數位轉型輔導計畫  
**技術支援**：系統管理員

---

## 📝 變更紀錄

| 版本 | 日期 | 變更內容 | 負責人 |
|------|------|---------|--------|
| v2.0 | 2025-10-16 | • 完成問卷管理模組（Items 6-12）<br>• 完成輔導紀錄模組（Items 13-17）<br>• 新增附件上傳功能<br>• 新增進階篩選與匯出<br>• 優化檔案結構 | 開發團隊 |
| v1.0 | 2025-10-07 | • 完成前台 5 頁<br>• 完成後台基礎功能<br>• 完成儀表板統計 | 開發團隊 |

---

**文件狀態**：✅ 已完成  
**最後更新**：2025-10-16  
**當前版本**：v2.0

# 商業服務業數位應用資料庫系統

完整的企業數位轉型輔導管理系統，包含前台問卷填寫、後台管理、問卷資料庫、輔導紀錄管理等功能。

---

## 📋 專案概述

本系統為協助中小企業數位轉型而設計，提供：
- **前台問卷系統**：企業填寫數位現況與需求調查
- **後台管理系統**：輔導顧問管理企業資料、問卷、輔導紀錄
- **資料分析與匯出**：視覺化統計圖表與報表匯出功能

---

## 🗂️ 專案結構

```
quastionary/
├── frontend/                      # 前台頁面（問卷填寫）
│   ├── p01-welcome.html              ✅ 歡迎頁
│   ├── p02-basic-info.html           ✅ 基本資料
│   ├── p03-digital-status.html       ✅ 數位現況
│   ├── p04-transformation.html       ✅ 轉型經驗
│   └── p05-complete.html             ✅ 完成頁
│
├── backend/                       # 後台頁面（管理系統）
│   ├── a01-login.html                ✅ 登入頁面
│   ├── a02-companies.html            ✅ 公司列表管理
│   ├── a03-company-detail.html       ✅ 公司詳情（問卷+輔導紀錄）
│   ├── a04-dashboard.html            ✅ 儀表板與視覺化分析
│   ├── a05-guidance-records.html     ✅ 全局輔導紀錄查詢
│   ├── a07-users.html                ✅ 使用者管理
│   └── _archived/                    📦 已廢棄檔案存檔
│       ├── a02-list.html                (舊問卷列表)
│       ├── a03-detail.html              (功能重複)
│       ├── a03-survey-detail.html       (功能重複)
│       ├── a06-filter.html              (未使用)
│       └── README.md                    (說明文件)
│
├── assets/                        # 資源檔案
│   ├── css/
│   │   └── custom.css                ✅ 全局自訂樣式
│   ├── js/
│   │   └── layout.js                 ✅ 共用佈局組件
│   └── images/                       🖼️ 圖片資源
│
├── index.html                     ✅ 專案首頁
├── prd.md                         📄 產品需求文件
└── README.md                      📄 專案說明文件（本檔案）
```

---

## ✨ 功能特色

### 🎯 前台問卷系統

#### 基本功能
- ✅ 響應式設計，支援桌面瀏覽器（≥1200px）
- ✅ 4步驟問卷流程，含進度條顯示
- ✅ 表單驗證與即時錯誤提示
- ✅ 資料暫存（localStorage）
- ✅ 隱私權聲明同意機制
- ✅ 完成頁面與確認單

#### 問卷內容
- **P01 歡迎頁**：系統介紹與隱私聲明
- **P02 基本資料**：企業基本資訊（15個欄位）
- **P03 數位現況**：行銷/營運/顧客三面向評估
- **P04 轉型經驗**：困難點、資源需求、開放建議
- **P05 完成頁**：提交成功與後續說明

---

### 🔧 後台管理系統

#### 1️⃣ 登入與權限管理（A01）
- ✅ 帳號密碼登入
- ✅ 記住我功能
- ✅ 登入狀態檢查與跳轉
- 📝 **測試帳號**：`admin` / `admin123`

#### 2️⃣ 公司管理（A02）
- ✅ 公司列表查看與 CRUD
- ✅ 多條件搜尋與篩選（名稱/統編/縣市/產業/數位化階段）
- ✅ 公司資料匯出（清單 + 統計摘要）
- ✅ 快速查看公司詳情

#### 3️⃣ 公司詳情頁（A03）- **核心頁面**

##### 📊 問卷管理模組（Items 6-12）
| 功能項目 | 狀態 | 說明 |
|---------|------|------|
| 新增問卷 | ✅ | Modal 化表單，含名稱/描述/負責人 |
| Excel 匯入 | ✅ | 支援 .xlsx/.xls 格式上傳 |
| 欄位自動辨識 | ✅ | 自動解析 Excel 標題列為欄位 |
| 資料覆蓋 | ✅ | 重新匯入時覆蓋舊資料 |
| 匯入紀錄管理 | ✅ | 記錄每次匯入的歷史（折疊式顯示） |
| 動態欄位查詢 | ✅ | 欄位顯示/隱藏 + 多條件篩選（Accordion UI） |
| 匯出功能 | ✅ | 匯出為 Excel/CSV，支援篩選結果匯出 |

**問卷管理特色**：
- 🎨 欄位選擇器：勾選要顯示的欄位
- 🔍 智慧篩選：Accordion 展開式多條件篩選
- 📈 統計資訊：回覆數、欄位數、匯入次數
- 📋 折疊式歷史：查看所有匯入紀錄

##### 🤝 輔導紀錄模組（Items 13-17）
| 功能項目 | 狀態 | 說明 |
|---------|------|------|
| 輔導紀錄 CRUD | ✅ | 新增/編輯/刪除/查看輔導紀錄 |
| 附件上傳 | ✅ | 支援多檔案上傳，分類顯示（報告/照片/其他） |
| 輔導階段追蹤 | ✅ | 初訪/中期/結案三階段管理 |
| 附件管理 | ✅ | 圖片預覽、檔案下載、刪除功能 |
| 報表匯出 | ✅ | 單一公司輔導紀錄匯出（Excel/CSV） |
| PDF 匯出 | ⏳ | 按鈕已預留，待範本提供後開發 |

**輔導紀錄特色**：
- 📎 附件分類：自動區分報告文件、現場照片、其他檔案
- 🖼️ 圖片預覽：點擊圖片可在 Modal 中放大查看
- 📁 檔案類型辨識：PDF、Excel、Word、PPT、CSV 等不同圖標
- 🗂️ 折疊式顯示：每個類別可獨立展開/收合

#### 4️⃣ 儀表板（A04）
- ✅ 統計卡片（總公司數、本週新增、本月新增、活躍公司）
- ✅ 視覺化圖表（Chart.js）
  - 📊 圓餅圖：產業別分布
  - 📈 橫條圖：年度趨勢分析
- ✅ 統計表格
  - 縣市分布統計
  - 產業別分布統計
  - 企業規模統計
  - 數位化階段分布

#### 5️⃣ 全局輔導紀錄查詢（A05）
- ✅ 跨公司輔導紀錄查詢
- ✅ 多條件篩選
  - 🔍 關鍵字搜尋（搜尋 9 個欄位）
  - 📅 日期區間篩選
  - 👤 輔導顧問篩選
  - 📋 輔導類型與階段篩選
- ✅ 搜尋結果匯出（Excel/CSV/PDF）
- ✅ 一鍵清除所有篩選條件

**關鍵字搜尋涵蓋欄位**：
公司名稱、縣市、產業別、輔導類型、輔導階段、輔導顧問、輔導主題、輔導內容、建議

#### 6️⃣ 使用者管理（A07）
- ✅ 使用者 CRUD
- ✅ 角色與權限管理
- ✅ 帳號啟用/停用
- ✅ 搜尋與篩選功能

---

## 🛠️ 使用技術

### 前端框架與庫
| 技術 | 版本 | 用途 |
|------|------|------|
| **Bootstrap** | 5.3.0 | UI 框架與響應式佈局 |
| **Chart.js** | 4.4.0 | 圖表視覺化 |
| **XLSX.js** | 0.18.5 | Excel 檔案讀取與匯出 |
| **Material Icons** | Latest | Google 圖標庫 |

### 開發技術
- **HTML5**：語義化標籤
- **CSS3**：Custom Properties + Flexbox + Grid
- **JavaScript (ES6+)**：原生 JavaScript，無需編譯

### 資料儲存
- **localStorage**：前端資料持久化（當前方案）
- **未來規劃**：後端 API + 資料庫（MySQL/PostgreSQL）

---

## 🎨 設計規範

### 色彩系統
```css
--color-primary: #1890FF      /* 主色 */
--color-success: #52C41A      /* 成功 */
--color-warning: #ff9800      /* 警告 */
--color-danger: #FF4D4F       /* 危險/錯誤 */
--color-info: #2196F3         /* 資訊 */

--color-text: #262626         /* 主要文字 */
--color-text-secondary: #8C8C8C  /* 次要文字 */
--color-bg-gray: #F0F2F5      /* 背景灰 */
--color-border: #e0e0e0       /* 邊框 */
```

### 字體規範
- **標題**：20-24px，粗體（font-weight: 600）
- **內文**：14px，正常（font-weight: 400）
- **說明**：12px，正常
- **行高**：1.5（內文）/ 1.2（標題）

### 間距系統
- **4px**：極小間距
- **8px**：小間距
- **16px**：標準間距
- **24px**：中等間距
- **32px**：大間距
- **圓角**：8px（卡片、按鈕）

---

## 🚀 快速開始

### 方法 1：直接開啟 HTML 檔案

#### 前台問卷
1. 開啟 `frontend/p01-welcome.html`
2. 按照引導填寫問卷

#### 後台管理
1. 開啟 `backend/a01-login.html`
2. 使用測試帳號登入：
   - **帳號**：`admin`
   - **密碼**：`admin123`

### 方法 2：使用本地伺服器（推薦）

```bash
# 使用 Python 3
python3 -m http.server 8000

# 或使用 Node.js (需安裝 http-server)
npx http-server -p 8000

# 或使用 PHP
php -S localhost:8000
```

然後在瀏覽器開啟：
- 前台：`http://localhost:8000/frontend/p01-welcome.html`
- 後台：`http://localhost:8000/backend/a01-login.html`

---

## 📖 使用說明

### 前台：企業填寫問卷

1. **開始填寫**
   - 閱讀隱私聲明並同意
   - 點擊「開始填寫」按鈕

2. **填寫基本資料**
   - 必填欄位標示 `*`
   - 選擇縣市、產業別等下拉選項
   - 填寫聯絡人資訊

3. **評估數位現況**
   - 勾選已使用的數位工具
   - 填寫優先度（1-5）

4. **轉型經驗與需求**
   - 選擇遇到的困難點
   - 填寫資源需求（最多3項）
   - 提供建議（選填）

5. **完成提交**
   - 查看問卷編號
   - 資料已儲存至系統

---

### 後台：管理企業資料

#### 🏢 公司管理
1. 點擊側邊欄「所有公司」
2. 使用搜尋框或下拉篩選器過濾
3. 點擊「查看」進入公司詳情頁

#### 📊 問卷管理（在公司詳情頁）
1. **新增問卷**
   - 點擊「新增問卷」按鈕
   - 填寫問卷名稱、描述、負責人

2. **匯入 Excel 資料**
   - 點擊「匯入」按鈕
   - 選擇 Excel 檔案
   - 系統自動辨識欄位並匯入

3. **篩選與查詢**
   - 點擊「篩選」按鈕
   - **顯示欄位**：勾選要顯示的欄位
   - **篩選條件**：展開欄位，選擇條件
   - 點擊「套用」查看結果

4. **匯出資料**
   - 點擊「匯出」下拉選單
   - 選擇 Excel 或 CSV 格式
   - 僅匯出當前篩選結果

#### 🤝 輔導紀錄管理

##### 單一公司輔導紀錄（在公司詳情頁）
1. **新增輔導紀錄**
   - 點擊「新增紀錄」
   - 填寫輔導資訊（日期、類型、內容等）

2. **上傳附件**
   - 點擊「檢視」進入紀錄詳情
   - 在「附件管理」區點擊「選擇檔案」
   - 選擇多個檔案後點擊「上傳」
   - 附件自動分類為：報告文件、現場照片、其他檔案

3. **管理附件**
   - 📷 圖片：點擊可放大預覽
   - 💾 檔案：點擊下載按鈕
   - 🗑️ 刪除：點擊垃圾桶圖標

4. **匯出紀錄**
   - 在輔導紀錄卡片點擊「匯出」
   - 選擇格式（Excel/CSV/PDF）

##### 全局輔導紀錄查詢（側邊欄「輔導紀錄」）
1. **設定篩選條件**
   - 關鍵字搜尋（可搜尋公司名稱、內容等）
   - 選擇輔導顧問
   - 設定日期區間
   - 選擇輔導類型與階段

2. **執行搜尋**
   - 點擊「搜尋」按鈕
   - 查看跨公司的輔導紀錄

3. **匯出結果**
   - 點擊結果卡片的「匯出」按鈕
   - 匯出篩選後的所有紀錄

#### 📈 儀表板
- 查看整體統計數據
- 分析產業別、縣市分布
- 查看視覺化圖表

---

## 📦 資料結構

### 公司資料（Company）
```javascript
{
  id: "C001",
  name: "企業名稱",
  taxId: "12345678",
  city: "台北市",
  industry: "資訊及通訊傳播業",
  employeeRange: "21-50人",
  digitalStage: "持續優化階段",
  surveys: [...],           // 問卷陣列
  guidanceRecords: [...],   // 輔導紀錄陣列
  createdAt: "2025-01-01"
}
```

### 問卷資料（Survey）
```javascript
{
  id: "S001",
  name: "2025 Q1 數位現況調查",
  description: "第一季問卷",
  owner: "張顧問",
  creator: "admin",
  createdAt: "2025-01-15",
  fields: [                 // 欄位定義
    { id: "field_1", name: "公司名稱", type: "text" }
  ],
  responses: [              // 回覆資料
    { id: "R001", submittedAt: "2025-01-20", values: {...} }
  ],
  importHistory: [          // 匯入歷史
    { id: "I001", fileName: "data.xlsx", uploadedAt: "2025-01-15", ... }
  ]
}
```

### 輔導紀錄（Guidance Record）
```javascript
{
  id: "G001",
  date: "2025-01-15T10:00:00",
  type: "現場訪視",
  status: "初訪",           // 初訪/中期/結案
  consultant: "張顧問",
  title: "數位行銷諮詢",
  content: "輔導內容...",
  suggestions: "建議事項...",
  attachments: [            // 附件陣列
    {
      id: "A001",
      name: "報告.pdf",
      type: "application/pdf",
      size: 1024000,
      data: "base64...",    // Base64 編碼
      uploadedAt: "2025-01-15"
    }
  ]
}
```

---

## 🧪 測試資料

系統內建測試資料：
- **公司數量**：3 家
- **問卷數量**：每家公司 1-2 份問卷
- **輔導紀錄**：每家公司 2-3 筆紀錄

**測試帳號**：
- 帳號：`admin`
- 密碼：`admin123`

---

## 📂 存檔說明

`backend/_archived/` 資料夾存放已廢棄的檔案：
- `a02-list.html`：舊問卷列表頁（功能已整合至 a03）
- `a03-detail.html`：功能重複
- `a03-survey-detail.html`：功能重複
- `a06-filter.html`：未使用

**說明**：這些檔案已移出主目錄，但保留備份以供參考。

---

## 🌐 瀏覽器支援

| 瀏覽器 | 最低版本 | 狀態 |
|--------|---------|------|
| Chrome | 90+ | ✅ 完全支援 |
| Firefox | 88+ | ✅ 完全支援 |
| Safari | 14+ | ✅ 完全支援 |
| Edge | 90+ | ✅ 完全支援 |

**注意**：不支援 IE 瀏覽器

---

## ⚠️ 注意事項

1. **資料儲存**
   - 目前使用瀏覽器 localStorage
   - 清除瀏覽器資料會遺失所有資料
   - 建議定期匯出備份

2. **檔案大小限制**
   - localStorage 總容量約 5-10MB
   - 附件上傳會轉為 Base64，佔用較多空間
   - 建議單檔不超過 2MB

3. **螢幕解析度**
   - 建議使用桌面瀏覽器
   - 最小寬度 1200px
   - 未來可擴展響應式設計

4. **網路需求**
   - 需載入 CDN 資源（Bootstrap、Chart.js、XLSX.js）
   - 建議有網路連線以確保樣式與功能正常

---

## 🚀 未來規劃

### 短期（1-2個月）
- [ ] PDF 匯出功能（待範本提供）
- [ ] 響應式設計優化（支援平板與手機）
- [ ] 批次匯入企業資料
- [ ] 進階統計報表

### 中期（3-6個月）
- [ ] 後端 API 開發（Node.js / Python）
- [ ] 資料庫整合（MySQL / PostgreSQL）
- [ ] 使用者權限細分（角色管理）
- [ ] Email 通知功能

### 長期（6個月以上）
- [ ] AI 輔助分析與建議
- [ ] 企業數位成熟度評分系統
- [ ] 知識庫與案例分享
- [ ] 行動裝置 App

---

## 📞 聯絡資訊

**專案負責單位**：經濟部中小企業處  
**開發團隊**：數位轉型輔導計畫  
**技術支援**：請聯繫系統管理員

---

## 📄 授權

© 2025 經濟部中小企業處  
本系統為政府輔導計畫專案，僅供授權單位使用。

---

## 📌 版本資訊

| 版本 | 日期 | 更新內容 |
|------|------|---------|
| **v2.0** | 2025-10-16 | • 完整問卷管理模組<br>• 完整輔導紀錄模組<br>• 附件上傳功能<br>• 進階篩選與匯出<br>• 檔案結構優化 |
| v1.0 | 2025-10-07 | • 前台問卷系統<br>• 後台基礎功能<br>• 儀表板統計 |

---

**最後更新**：2025-10-16  
**當前版本**：v2.0
